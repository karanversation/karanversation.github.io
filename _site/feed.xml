<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.10.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2026-02-15T20:26:58+05:30</updated><id>http://localhost:4000/feed.xml</id><title type="html">karanversation</title><subtitle>Engineering, Programming, (wannabe) Physics and Robotics</subtitle><entry><title type="html">A hybrid MySQL data model with Horizontal Sharding and a Global data platform</title><link href="http://localhost:4000/programming/2023/01/18/hybrid-mysql-data-model-horizontal-sharding-global-data-platform.html" rel="alternate" type="text/html" title="A hybrid MySQL data model with Horizontal Sharding and a Global data platform" /><published>2023-01-18T00:00:00+05:30</published><updated>2023-01-18T00:00:00+05:30</updated><id>http://localhost:4000/programming/2023/01/18/hybrid-mysql-data-model-horizontal-sharding-global-data-platform</id><content type="html" xml:base="http://localhost:4000/programming/2023/01/18/hybrid-mysql-data-model-horizontal-sharding-global-data-platform.html"><![CDATA[<p><img src="https://cdn-images-1.medium.com/max/800/0*L7YtvCgGaabAJnZL.png" alt="MySQL Hosting Platform" /></p>

<p><em>Image src: <a href="https://geekflare.com/mysql-hosting-platform/">https://geekflare.com/mysql-hosting-platform/</a></em></p>

<p>A very popular interview question revolves around choosing MySQL vs NoSQL data stores. This decision is much more relevant for early startups as their choice determines potential data scalability and performance bottlenecks in the future. A smart decision at this point can save painstaking effort to redesign and mass-migrate data later.</p>

<p>For us, our final data model ended up helping us build our own sharding scheme that scaled our database infra by 100x, and also build a cross-region replication framework with a team of just two engineering in a span of ~6 months.</p>

<p>Let’s look at the high-level database requirements of a typical startup -</p>

<ul>
  <li>The overall system needs to be very stable and easy to operate and maintain</li>
  <li>The schema should be easy to update and flexible to avoid large structural changes in the future.</li>
  <li>Ok to have not petabyte-scale upfront, but easy to scale both vertically and horizontally in the near future as more customers get onboarded.</li>
  <li>Has strong documentation and community support to help with quick decision-making.</li>
</ul>

<p>Now MySQL ticks a lot of checkboxes above and provides many inbuilt DB features (auto increment, indexes, partitions) that make it easy to create efficient datastores upfront with relative ease.
But the matter of fact is — MySQL was originally designed as a single-node system and not with the modern distributed data center setup in mind. Also, unless very carefully planned, audited and updated, MySQL schema can become too rigid to help accommodate needs of a dynamic data model.</p>

<p>At my current organisation, our data architects realized this early on and thought of how to implement a datastore that gives us the best of both worlds -</p>

<ul>
  <li>Excels at traditional DB properties (ACID) providing us DB features like auto increment, indexes, paritions, etc.</li>
  <li>Has a balanced read/write performance</li>
  <li>Doesn’t have us worried about the future limitations of scale</li>
  <li>And best of all — lets us use SQL, which can be called the ‘English language of the database world’</li>
</ul>

<p>To achieve this, we implemented our data model in MySQL with a few key ground rules -</p>

<ul>
  <li>No SQL foreign key relationships</li>
  <li>No JOINS in SQL for production queries</li>
  <li>By default, prefer columns instead of an opaque JSON blob</li>
  <li>JSON is OK for certain data that may be unstructured</li>
  <li>Denormalize data in tables based on use case, caching and write/update paths</li>
</ul>

<p>It might be evident from above that each of our table has one set of individual columns and another set of JSON blobs. This helps us achieve a normalization and denormalization hybrid.</p>

<p>Each top-level entity — like candidate profile or job position — has its table with standard individual columns that we may frequently use in indexes, eg: timestamps, users, category, etc.
The json blob field, on the other hand, may store any unstructured data that is directly associated with table entity. Eg: Details of certifications of a profile as a certificates_json column in profile table.</p>

<p>This follows a set of second-level entities like profile tags, notes, etc. that need a reference to the original top-level entity — profile in this case.</p>

<p>While we may store the id of the top-level profile in a column in profile_tag for instance, we do not establish a SQL foreign key relationship. This helps us still keep relationships loose.</p>

<p>A top-level entity may have a one-to-many relationship with other entities just by aggregating entity ids as part of the data_json field.</p>

<p>Our tables are designed in a way that most application lookups are</p>

<h2 id="sharding-mysql">Sharding MySQL</h2>

<p>The true merit of our data model showed up once we started implementing our own custom application-level sharding on top of MySQL.</p>

<p>Almost 95% of our data is logically partitioned on basis of customer ids. We needed a way to physically partition these customer ids into multiple database clusters without losing out on O(1) lookup performance.</p>

<p>Introducing a layer of indirection in between, we mapped customers to logical shards and shards to physical clusters. This made sure we could distribute a customer in one or many clusters, or have multiple customers present on the same physical cluster. Our data infrastructure could operate in both single and multi tenant modes.</p>

<p>Implementation — We use entity id to encode details of which shard a customer maps to. Each table row also has the customer_id.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>entity_id = <span class="nt">&lt;shard_id&gt;</span> <span class="err">&lt;</span><span class="nt">&lt; A</span> <span class="err">|</span> <span class="err">&lt;sequence_id</span><span class="nt">&gt;</span>
customer_id
</code></pre></div></div>

<sequence_id> is generated from a sequence table that has an auto_increment field, while there is no auto_increment field in our main data table.

Now once our metadata stores mapping between customer_id to shards and shards to physical clusters, so while making db connections we can pick the correct cluster or set of clusters to execute the query in.

## Shard migration

Keeping our sharding scheme backwards compatible, we had used shard_id 0 for all these customers. But with more data we needed to 'extract' these customers out from shard_id 0 to newer shards existing on separate clusters.

To achieve this, we created a shard migration framework that was capable of performing in-place id translation from one shard_id to another. We were able to achieve this in a simple way due to the no-foreign-key constraint.

## Global data platform

While operating in data stores across multiple AWS regions — some of these did not support AWS Global clusters. We hence wanted to build a equivalent global replication framework, that can make sure clusters across regions are eventually consistent.

We again made use of our sharding strategy to include a global bit -

```xml
entity_id = <global_bit> &lt;&lt; B | <shard_id> &lt;&lt; A |  &lt; <sequence_id>
```

We also implemented SQS based propagation of db save operations that are handled in the other region by a batch processing framework.

Originally delivered as a Tech Talk at Rootconf 2021 — Choosing Datastores

[https://hasgeek.com/rootconf/choosing-datastores/sub/a-hybrid-mysql-data-model-with-horizontal-sharding-76HxjKhwwWXVbmUvbGphXT](https://hasgeek.com/rootconf/choosing-datastores/sub/a-hybrid-mysql-data-model-with-horizontal-sharding-76HxjKhwwWXVbmUvbGphXT)
</sequence_id></shard_id></global_bit></sequence_id>]]></content><author><name></name></author><category term="programming" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">wtf-ython</title><link href="http://localhost:4000/programming/2021/10/14/wtf-ython.html" rel="alternate" type="text/html" title="wtf-ython" /><published>2021-10-14T00:00:00+05:30</published><updated>2021-10-14T00:00:00+05:30</updated><id>http://localhost:4000/programming/2021/10/14/wtf-ython</id><content type="html" xml:base="http://localhost:4000/programming/2021/10/14/wtf-ython.html"><![CDATA[<p><em>(Nano-blog alert)</em></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="nb">bool</span><span class="p">(...)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="bp">True</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1_00_000</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
   <span class="p">...:</span>     <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
   <span class="p">...:</span>         <span class="k">break</span>
   <span class="p">...:</span> <span class="k">else</span><span class="p">:</span>
   <span class="p">...:</span>     <span class="k">print</span><span class="p">(</span><span class="s">'Nice'</span><span class="p">)</span>
   <span class="p">...:</span>
<span class="n">Nice</span>
</code></pre></div></div>

<p>Getting to know none of these throw a syntax error = Mind blown ^_^</p>

<p>Full blog and credits: <a href="https://towardsdatascience.com/hidden-gems-of-python-76020b14e42f">https://towardsdatascience.com/hidden-gems-of-python-76020b14e42f</a></p>

<p>K.</p>]]></content><author><name></name></author><category term="programming" /><summary type="html"><![CDATA[(Nano-blog alert)]]></summary></entry><entry><title type="html">Google Authenticator on Phone + Laptop</title><link href="http://localhost:4000/ideas/2021/05/01/google-authenticator-on-phone-laptop.html" rel="alternate" type="text/html" title="Google Authenticator on Phone + Laptop" /><published>2021-05-01T00:00:00+05:30</published><updated>2021-05-01T00:00:00+05:30</updated><id>http://localhost:4000/ideas/2021/05/01/google-authenticator-on-phone-laptop</id><content type="html" xml:base="http://localhost:4000/ideas/2021/05/01/google-authenticator-on-phone-laptop.html"><![CDATA[<p>Fed up of digging around for your phone every time your VPN, AWS, Git, etc. asks for an MFA passcode?</p>

<p>Let’s fix this.</p>

<p>What you need -</p>

<ol>
  <li>You phone having the Google Authenticator setup</li>
  <li>Google Chrome on the target laptop</li>
</ol>

<p>Replicate your Google Authenticator mobile accounts on your Laptop with these easy steps -</p>

<p><img src="https://cdn-images-1.medium.com/max/800/0*QPmujVbXUjzDXlR2.jpg" alt="Export accounts" /></p>

<ol>
  <li>Open Google Authenticator App on your phone. Select ‘Export accounts’</li>
  <li>Share a screenshot of the QR code to your laptop, via email/whatsapp or whatever suits best.</li>
  <li>Next download <a href="https://chrome.google.com/webstore/detail/authenticator/bhghoamapcdpbohphigoooaddinpkbai?hl=en">Authenticator Chrome App</a> on your target laptop</li>
  <li>Make sure the QR code you sent from your phone in (2) is visible on your screen.</li>
  <li>Open the app on chrome -&gt; Click on pencil icon -&gt; Click on + icon -&gt; Select ‘Scan QR Code’</li>
  <li>Take a snippet of the QR code from (4)</li>
</ol>

<p><img src="https://cdn-images-1.medium.com/max/800/1*4Cl5SlUCUrkgW3jUdtXRxQ.png" alt="Scan QR Code" /></p>

<p>Viola, Authenticator accounts are replicated on your laptop. Enjoy the luxury of copy-pasting your passcodes from now on. Cheers.</p>

<p>K.</p>]]></content><author><name></name></author><category term="ideas" /><summary type="html"><![CDATA[Fed up of digging around for your phone every time your VPN, AWS, Git, etc. asks for an MFA passcode?]]></summary></entry><entry><title type="html">A Basic Flask + HAProxy + MySQL integration</title><link href="http://localhost:4000/programming/2021/03/22/flask-haproxy-mysql-integration.html" rel="alternate" type="text/html" title="A Basic Flask + HAProxy + MySQL integration" /><published>2021-03-22T00:00:00+05:30</published><updated>2021-03-22T00:00:00+05:30</updated><id>http://localhost:4000/programming/2021/03/22/flask-haproxy-mysql-integration</id><content type="html" xml:base="http://localhost:4000/programming/2021/03/22/flask-haproxy-mysql-integration.html"><![CDATA[<p><img src="https://cdn-images-1.medium.com/max/800/0*u4KUBkRkX0BHVYEd.png" alt="Architecture Diagram" /></p>

<p>Documenting how to spin up a quick PoC of integrating a Flask app with MySQL through HAProxy. Our flask app will run on a gunicorn server locally.</p>

<h2 id="environment">Environment:</h2>

<p>OS: Ubuntu 20.04.2 LTS</p>

<p>Python/Flask versions: Python 2.7.17, Flask 1.1.2, Werkzeug 1.0.1</p>

<p>Gunicorn version: gunicorn (version 19.6.0)</p>

<p>HAProxy version: HA-Proxy version 1.8.8–1ubuntu0.11 2020/06/22</p>

<h3 id="key-gotchas-here-before-we-start">Key Gotchas here before we start</h3>

<ol>
  <li>
    <p>Connections are made in TCP so we use HAProxy here in layer 4 mode.</p>
  </li>
  <li>
    <p>Our Flask app uses SQLAlchemy to make connections, and engine would be pymysql.</p>
  </li>
  <li>
    <p>HAProxy doesn’t have context of understanding ‘mysql traffic’ so it acts as a TCP forwarder/load balancer and there is no connection pooling at proxy level.</p>
  </li>
</ol>

<h2 id="step-1--setup-mysql-server">Step 1 — Setup mysql-server</h2>

<p>Install MySQL server and start service:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">mysql</span><span class="o">-</span><span class="n">server</span>
<span class="n">sudo</span> <span class="n">service</span> <span class="n">mysql</span> <span class="k">start</span>
</code></pre></div></div>

<p>Get inside the MySQL shell:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>mysql
</code></pre></div></div>

<p>Create required test user and grant perms:</p>

<blockquote>
  <p>CREATE USER ‘haproxy_user’@’localhost’ IDENTIFIED BY ‘tester’;
GRANT ALL PRIVILEGES ON * . * TO ‘haproxy_user’@’localhost’;
FLUSH PRIVILEGES;</p>
</blockquote>

<p>Create test db and table:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">database</span> <span class="n">test</span><span class="p">;</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">test</span><span class="p">.</span><span class="n">todos</span> <span class="p">(</span><span class="n">id</span> <span class="nb">int</span><span class="p">,</span> <span class="n">item</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">status</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">));</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">test</span><span class="p">.</span><span class="n">todos</span> <span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nv">"task1"</span><span class="p">,</span> <span class="nv">"pending"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">test</span><span class="p">.</span><span class="n">todos</span> <span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nv">"task2"</span><span class="p">,</span> <span class="nv">"done"</span><span class="p">);</span>
</code></pre></div></div>

<p>Confirm that you’re able to login to mysql with the test user:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> haproxy_user <span class="nt">-ptester</span>
</code></pre></div></div>

<p>MySQL will be running on port 3306 on your localhost now.</p>

<h2 id="step-2--setup-haproxy">Step 2 — Setup HAProxy</h2>

<p>Update the haproxy.cfg file present in /etc/haproxy/ as follows:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>global
        log /dev/log    local0
        log /dev/log    local1 notice
        <span class="nb">chroot</span> /var/lib/haproxy
        stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners
        stats <span class="nb">timeout </span>30s
        user haproxy
        group haproxy
        daemon
        maxconn 100
        <span class="c"># Default SSL material locations</span>
        ca-base /etc/ssl/certs
        crt-base /etc/ssl/private
        <span class="c"># Default ciphers to use on SSL-enabled listening sockets.</span>
        <span class="c"># For more information, see ciphers(1SSL). This list is from:</span>
        <span class="c">#  https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/</span>
        <span class="c"># An alternative list with additional directives can be obtained from</span>
        <span class="c">#  https://mozilla.github.io/server-side-tls/ssl-config-generator/?server=haproxy</span>
        ssl-default-bind-ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:!aNULL:!MD5:!DSS
        ssl-default-bind-options no-sslv3
defaults
        log     global
        <span class="nb">timeout </span>connect 5s
        <span class="nb">timeout </span>client  300s
        <span class="nb">timeout </span>server  300s
        errorfile 400 /etc/haproxy/errors/400.http
        errorfile 403 /etc/haproxy/errors/403.http
        errorfile 408 /etc/haproxy/errors/408.http
        errorfile 500 /etc/haproxy/errors/500.http
        errorfile 502 /etc/haproxy/errors/502.http
        errorfile 503 /etc/haproxy/errors/503.http
        errorfile 504 /etc/haproxy/errors/504.http
listen msyql
        <span class="nb">bind </span>127.0.0.1:5555
        mode tcp
        option srvtcpka
        balance roundrobin
        server mysql1 127.0.0.1:3306 maxconn 10
</code></pre></div></div>

<p>The above includes some default values and in particular the mysql binding that we’ve created for our connections.</p>

<p>Start the haproxy service</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>service haproxy start
</code></pre></div></div>

<h2 id="step-3--setup-flask-app">Step 3 — Setup flask app</h2>

<p>Create a file <strong>app.py</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="n">db_uri</span> <span class="o">=</span> <span class="s">'mysql+pymysql://haproxy_user:tester@localhost:5555'</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">db_uri</span><span class="p">,</span> <span class="n">pool_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pool_recycle</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="s">'select * from test.todos'</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="k">return</span> <span class="s">"Welcome!</span><span class="se">\n</span><span class="s">"</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/todos"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">list_todos</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="n">engine</span><span class="p">.</span><span class="n">pool</span><span class="p">.</span><span class="n">__dict__</span><span class="p">)</span>
  <span class="k">with</span> <span class="n">engine</span><span class="p">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">db_res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">db_res</span><span class="p">:</span>
      <span class="n">res</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="s">'item'</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">'status'</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
  <span class="k">return</span> <span class="n">res</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/sleep/&lt;s&gt;"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">slow_query</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
  <span class="k">with</span> <span class="n">engine</span><span class="p">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">db_res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">'SELECT SLEEP({})'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
  <span class="k">return</span> <span class="p">{</span><span class="s">'slept'</span><span class="p">:</span><span class="n">s</span><span class="p">}</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
  <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></div>

<p>This App exposes a few endpoints -</p>

<p>/sleep/<s> will run a query which sleeps for s seconds</s></p>

<p>/todos will execute a query to select all todos from the test db and return the response</p>

<p>Next we need to run this app over couple of instances of gunicorn</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gunicorn <span class="nt">-w</span> 1 <span class="nt">-k</span> gevent app:app <span class="nt">-b</span> 127.0.0.1:8000 &amp;
gunicorn <span class="nt">-w</span> 1 <span class="nt">-k</span> gevent app:app <span class="nt">-b</span> 127.0.0.1:8001 &amp;
</code></pre></div></div>

<p>These are our app servers, now to execute a query from either of these, just do a curl</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl localhost:8000/sleep/10 &amp;
</code></pre></div></div>

<p>This will execute a query that sleeps in MySQL for 10 seconds. Meanwhile you can go to mysql shell and check the running queries -</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="n">PROCESSLIST</span><span class="p">;</span>
</code></pre></div></div>

<p>And MySQL will show you one connection made for the above curl.</p>]]></content><author><name></name></author><category term="programming" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">Problem-solving &amp;amp; Code interview in 45 mins</title><link href="http://localhost:4000/ideas/2019/09/18/problem-solving-code-interview-45-mins.html" rel="alternate" type="text/html" title="Problem-solving &amp;amp; Code interview in 45 mins" /><published>2019-09-18T00:00:00+05:30</published><updated>2019-09-18T00:00:00+05:30</updated><id>http://localhost:4000/ideas/2019/09/18/problem-solving-code-interview-45-mins</id><content type="html" xml:base="http://localhost:4000/ideas/2019/09/18/problem-solving-code-interview-45-mins.html"><![CDATA[<h1 id="taking-a-problem-solvingcoding-interview-in-45-mins">Taking a problem-solving/coding interview in 45 mins</h1>

<p><img src="https://cdn-images-1.medium.com/max/800/0*-y0MENvgy9qoj7yU.png" alt="Interview Process" /></p>

<p>Notes on my experiments with effective coding/PS interview.</p>

<ol>
  <li>Start with a rough problem statement.</li>
  <li>Did candidate ask questions to clarify and establish scope?</li>
  <li>Ask which data structure to be used? What other options are there? Why this one?</li>
  <li>Did candidate use single class or decompose to multiple? OOP-thinking?</li>
  <li>Ask scenarios. Types and counts of each type?</li>
  <li>Did candidate think TDD? Were cover corner cases covered?</li>
  <li>Test approach to solution.</li>
  <li>First principles thinking?</li>
  <li>Did candidate get biased by scenarios thought of earlier?</li>
  <li>Does candidate get confused by counter questioning?</li>
  <li>How is the confidence on approach taken?</li>
  <li>Receptive to hints and feedback?</li>
  <li>Make candidate write code.</li>
  <li>Correct syntax &amp; chosen language conventions followed acceptably.</li>
</ol>

<p><strong>Bonus</strong>:</p>

<ol>
  <li>Document code in Google docs. If offline, collect papers for later reference.</li>
  <li>Open Google Timer setting it to 45 mins — check duration overflow.</li>
  <li>Try to standardize evaluation metrics (depending on which round — coding, design, project, etc.) and keep them consistent across candidates.</li>
  <li>Capture feedback as H/M/L rating and quick notes based on (2)</li>
</ol>

<p><img src="https://cdn-images-1.medium.com/max/800/1*P5xwSkuV0hcOrO_eW8qnlg.png" alt="Evaluation Metrics" /></p>

<p>Remarkable how sometimes the most non-trivial problems need the simplest of solutions.</p>

<p>K.</p>]]></content><author><name></name></author><category term="ideas" /><summary type="html"><![CDATA[Taking a problem-solving/coding interview in 45 mins]]></summary></entry><entry><title type="html">Smart Cities | Pradeya — An Idea for the Grassroots</title><link href="http://localhost:4000/prototypes/2017/06/03/smart-cities-pradeya.html" rel="alternate" type="text/html" title="Smart Cities | Pradeya — An Idea for the Grassroots" /><published>2017-06-03T00:00:00+05:30</published><updated>2017-06-03T00:00:00+05:30</updated><id>http://localhost:4000/prototypes/2017/06/03/smart-cities-pradeya</id><content type="html" xml:base="http://localhost:4000/prototypes/2017/06/03/smart-cities-pradeya.html"><![CDATA[<h2 id="pradeya--platform-for-automated-distribution-of-unused-items">Pradeya — Platform for Automated Distribution of Unused Items</h2>

<p><img src="https://cdn-images-1.medium.com/max/800/0*JBbP9rBgVF7mel7Y.jpg" alt="Pradeya" /></p>

<h3 id="summary">Summary</h3>

<p>With rapid urbanisation, the country is facing massive waste management challenges. Over 377 million urban people generate 62 million tonnes of municipal solid waste per annum. Alongside, per annum more than ₹1 lakh crore worth of food is wasted.</p>

<p>On the other side, with population below poverty line reaching 25 per cent, and one out of three malnourished children in the world being Indian, we can efficiently employ the principle of “One man’s trash is another man’s treasure”.</p>

<p>Interactive platforms can register unused items, converting the location into a collection point, which can be intelligently communicated to a needy citizen.</p>

<hr />

<h3 id="problem">Problem</h3>

<p>Waste pickers in India represent less than 0.1% of the urban workforce, resulting in extensive waste mismanagement.</p>

<p>For almost 25% of the population living below the poverty line, unused goods can be an invaluable resource. Food wastage alone costs India ₹1 lakh crore every year.</p>

<hr />

<h3 id="solution">Solution</h3>

<p>A multi-platform (Web, App, SMS) portal where people can upload unused goods and spare food (events, restaurants, etc.).</p>

<p>Using BPL and Ration card data, needy individuals can be identified. Aadhaar-linked identity can connect them to nearby collection points, with fair distribution ensured through round-robin allocation.</p>

<hr />

<h3 id="impact">Impact</h3>

<p>Demand-driven distribution of unused items can significantly reduce waste.</p>

<p>Intelligent analytics can ensure fairness and trust in distribution, feeding families and improving food security.</p>

<hr />

<h3 id="technology">Technology</h3>

<p>Adobe Experience Manager<br />
Adobe Analytics<br />
Adobe Campaign</p>

<hr />

<h3 id="demo">Demo</h3>

<p><a href="https://www.youtube.com/watch?v=apg1lYx4Mvk">https://www.youtube.com/watch?v=apg1lYx4Mvk</a></p>]]></content><author><name></name></author><category term="prototypes" /><summary type="html"><![CDATA[Pradeya — Platform for Automated Distribution of Unused Items]]></summary></entry><entry><title type="html">TradeCops - A Generic tool for Parameter based Visualization</title><link href="http://localhost:4000/prototypes/2014/01/29/tradecops.html" rel="alternate" type="text/html" title="TradeCops - A Generic tool for Parameter based Visualization" /><published>2014-01-29T00:00:00+05:30</published><updated>2014-01-29T00:00:00+05:30</updated><id>http://localhost:4000/prototypes/2014/01/29/tradecops</id><content type="html" xml:base="http://localhost:4000/prototypes/2014/01/29/tradecops.html"><![CDATA[<p>Data is important to all of us.</p>

<p>But what’s more important is the WAY we see it.</p>

<p>TradeCops was built for a specific business use case, but the design and code are highly generic - which means all it needs to port it onto a totally unrelated business case is a few changes in the configuration files.</p>

<p>Well, this is how enterprise systems work.</p>

<p>Our business case was for <strong>Trade Compliance and Risk Governance</strong>. Compliance monitor trading activity of their clients through a monitoring system. Once in a while, the system shows anomalous trading behaviour. The judgement is based on automated algorithms fed to the monitoring engine.</p>

<p>The question for Compliance now, is whether this really is an abnormal activity? It might be -</p>

<ul>
  <li>a perfectly sensible move (in case Apple fires it’s CEO, the stock is bound so tank. So if client is selling the stocks madly, it’s stupid to blame him for abnormal trades),</li>
  <li>or something fishy (the market sentiment is neutral, but the client is selling like millions of stocks!</li>
</ul>

<p>The way to do this is to manually check out information online and through firm proprietary systems. And once you have the intel from a dozen different sources, use your head to come up with a sensible boolean decision.</p>

<p>Too bad.</p>

<p>TradeCops asks Compliance to ‘plug in’ their data sources, select what they want to visualize, how, and for what (we’ll give you can example soon), and viola - a compelling visualization in seconds.</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjcP40TjyJpPRB6ds-AlsR7RvUCVdLn3xGfQMkrMiuWtVOiCPtQ2oN0KDLzejN5nddcS833f0oLemnhffVpv3a327NppNPvu4MR9BWpjQkjLVgSr_dmchlx3nUWo5Al3QGfKRV-smew9mj2/s1600/TradeCops_2.jpg" alt="TradeCops Visualization" /></p>

<p>Yeah. This is what I was talking about.</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgAZcZUwZU_Ad9IQAfQ0lNi_lSky7YZjjg4NrtiVJrRHK9Ga1W70kHs9P9gpt_sG-3ePFrKLoUCgeQmRrurWK_HtJgCEjaUXaRK0GBle8EiEQppdrKiEKy9ZL6TOX3b2Eyx_TcOsWzW9opq/s1600/Tradecops.jpg" alt="TradeCops Chart" /></p>

<p>And the specifications for this chart.</p>

<p>Or else advanced features like ‘Saved template loading’ (which I’ll illustrate later)</p>

<p>Now you are free to provide specifications according to your requirement, and we can visualize almost anything*</p>

<p>*Information processed and visualized by us is in tabular format (Database table, CSV files, etc)</p>

<p>Another snapshot of Tradecops flaunting it’s UI.</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEix7_2BAO0w2Hw0GuJrEKb5LAz_k5kSkajrxJn8T4BRFCTRLJkwxxNkxwSp5j31n8LsaHi5QHrzhyw3goxAXrAnA_7ez_NcfYWRZioAsqsBoJmdht6eOCSqeYDh_OzCKQl42bnuBxLgL-3C/s1600/Tradecops.jpg" alt="TradeCops UI" /></p>

<p>My next blog talks about the art behind the scenes. In simpler words - the underlying architecture, technologies involved, introduction to a design pattern implemented and lastly, the sexy UI code structure.</p>]]></content><author><name></name></author><category term="prototypes" /><summary type="html"><![CDATA[Data is important to all of us.]]></summary></entry><entry><title type="html">Excel2XML - Experiments with VBA</title><link href="http://localhost:4000/programming/2012/01/01/excel2xml-experiments-with-vba.html" rel="alternate" type="text/html" title="Excel2XML - Experiments with VBA" /><published>2012-01-01T00:00:00+05:30</published><updated>2012-01-01T00:00:00+05:30</updated><id>http://localhost:4000/programming/2012/01/01/excel2xml-experiments-with-vba</id><content type="html" xml:base="http://localhost:4000/programming/2012/01/01/excel2xml-experiments-with-vba.html"><![CDATA[<p>Working with VBA for transferring data from Excel sheets onto XML files, was Part-1 of my project concerning generation of apps for mobile database implementation.</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgXx9R1-Oc3SkpgW5MduMZHMHztvvRFQ3tNIKaoKOo98Cj34KjrDpow0S_EA-oswL-aEon8RwAMFX8S_Z-c5tM-GMQ5XEBWh_WZBZmooNwsHQgyAa3-6Guc6YiX_u94Ce_4L7I2_vFsfBhT/s1600/Untitled.png" alt="Excel2XML Main" /></p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj3B6QMESLJhspy4owiLt9aVA7_yNBF6yS9ndvpYLAC5OyL9LtpVQ4Ig_QEzbiDJiA6P0tTA2sKKuKefM2sMQ3ejDMnIexl1mRH8kL6awAd5IiUnj18SeWJtBN5bhWJn49iX0_nNfHJBlHL/s320/Capture.JPG" alt="Developer Tools" /></p>

<p>For this purpose, I utilized the Developer tools of Microsoft Excel.</p>

<p>To enable the developer tools, you can follows the steps mentioned <a href="http://office.microsoft.com/en-us/excel-help/show-the-developer-tab-or-run-in-developer-mode-HA010173052.aspx">here</a>.</p>

<p>Once, the developer tab appears on your screen, you can begin with the coding work!</p>

<p>My program code would work successfully with data in multiple TABs on the worksheet.</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjIpfnBv66P0dZTOCgTzoB4__7AYEdCO3NIPa4KmgH36cb0nGC3hit636LT2aSQriRT0FGFgT260gjT1EU5K2PyA2Wtv4ZFCvXeLR2_todnjSPac-q1g4QufmPXoOrZhAVg7hbaNCFs5sFP/s1600/Capture.JPG" alt="Worksheet Tabs" /></p>

<p>Now from the developer tab, you need to select the <strong>Command Button</strong>, under <strong>Insert</strong> option.</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjlNOa_3bWmSxB2r5rfLnSXhIje70sIPUg4qk2bZkc42Cp91Zc9Ckq9yiqF-QV-jgfIQ-2-qpW5cUdOGUnfuNsGaJh1llG1n4tdFl35_3WA5mBRVqsjt4QEXvwkQMK51jgB9rxNviET3CGy/s1600/Capture.JPG" alt="Command Button" /></p>

<p>Command Button is inserted. You can now change its properties as follows -</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEht71K0jFndkl9rg1T4c3-5YNKcdp_QSeoA_UoYravv2ykPOHb7vBy6n6Yy28ZD4zdM3IZFB1lrL80-siuUC9Q6m8TSC3d9GFvvnHuqpFZmx5T2nMlnCGm4Me26Ttng8L6DDZHpZlh_K4Pd/s1600/Capture.JPG" alt="Button Properties" /></p>

<p>Once the necessary changes are done, do ensure that the <strong>Design Mode</strong> button is selected, and then double click on the Button you earlier inserted to get into the VBA development area!</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhvgYTS8qzmw6iuGxmUpHTRO85ALy7417_IlQu9FPle7nmwQylW3AsvL538G__ZRON8k-rl-9kLGhT2GYo1KmSkXILg8EN6MCG3klIwqXi8pQ-JYQqNU1s_loabTl1EezkJm537XcEB168W/s640/Capture.JPG" alt="VBA Development Area" /></p>

<p>This is where my code comes into play.</p>

<pre><code class="language-vba">Dim x As Integer
For x = 1 To ThisWorkbook.Worksheets.Count
    ThisWorkbook.Worksheets(x).Select
    
    Dim strXML As String
    If Application.Count(Selection) = 0 Then
        FindUsedRange
    End If
    
    Set objXMLDoc = GenerateXMLDOM(Selection, "data")
    
    Dim path As String
    path = ThisWorkbook.path &amp; "\" &amp; ActiveSheet.Name &amp; " (" &amp; ThisWorkbook.Name &amp; ")" &amp; ".xml"
    
    objXMLDoc.Save (path)
    
Next x
    
MsgBox ("Operation Complete!!!")
</code></pre>

<p>Paste this code inside the <strong>sub</strong> function of the command button.</p>

<p>Now you need to IMPORT the .bas file of the script that I have created.</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgAFZUKaKpFvFKJkBXpGNVOozeRG7umYuAIxVilvcvI-6twwPGfmntKaHM50i0IC4yfvGVl487OpBdJw7kUZz_B4WGvrpjg7UlJkZSodoa1Zq7Qseaj5G2wtncksKD61oXv63sQR2vAizQe/s1600/Capture.JPG" alt="Import BAS File" /></p>

<p>This is where you need to MODIFY the code, according to the fields of your excel sheet and the required XML tags. For this you need to know basics of VBA coding.</p>

<p>In my case, when the Import is done, and the code runs without error, on clicking the Command Button earlier inserted, the required XML files are generated and stored in the same directory and a confirmation message is shown -</p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiVgfxOcx1x-reQinIbAJy6w0IvFaHD5a0XfISVeI9JjHxSuLP3zWyExlfZ_nqzbke_bLqh7dn__nT8ttNdE1nzaEWIPoP-3o56OnhHpO1FbAj8zNXbP_z7HGhVQuNHTAU1CNQ-yw9kTSHY/s1600/Capture.JPG" alt="Operation Complete" /></p>

<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgNZVRHr8uosCt_vLew7FMDE8h0lwmVUgBOTfUbl-mOyN9fO1LtAZXNj51ABvGOQgilK6OX2b9zjT5m5pXujgk2bV-JeCSTDhSQ7l7PcMDZD1hwS8JSAWgJCttVtefZVnyfRSljPU-zTu4q/s1600/Capture.JPG" alt="XML Files Generated" /></p>

<p>You can download my .bas file from <a href="http://www.mediafire.com/?ip6xpkr8ept8ne8">here</a>.</p>

<p>If you wish to view the complete SRS, you can download the pdf from <a href="http://www.mediafire.com/?2s7m8m5cw29boux">here</a>.</p>

<p>Mission Successful! :)</p>

<p><em>Original post: <a href="https://karanversation.blogspot.com/2012/01/excel2xml-experiments-with-vba.html">https://karanversation.blogspot.com/2012/01/excel2xml-experiments-with-vba.html</a></em></p>]]></content><author><name></name></author><category term="programming" /><summary type="html"><![CDATA[Working with VBA for transferring data from Excel sheets onto XML files, was Part-1 of my project concerning generation of apps for mobile database implementation.]]></summary></entry></feed>